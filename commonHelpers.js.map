{"version":3,"file":"commonHelpers.js","sources":["../src/scripts/iziToast.js","../src/scripts/lightbox.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport default function showMessage(message) {\n  iziToast.show({\n    close: false,\n    closeOnClick: true,\n    message,\n    messageColor: 'white',\n    timeout: 3000,\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n    position: 'topRight',\n    backgroundColor: 'red',\n    progressBar: false,\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('#gallery a', {\n  overlayOpacity: 0.5,\n  showCounter: false,\n});\n\nexport default lightbox;\n","import axios from 'axios';\nimport showMessage from './scripts/iziToast.js';\nimport lightbox from './scripts/lightbox.js';\n\nconst API_KEY = '41474300-2fa05bee877be877b8dc1781f';\nconst API_BASE_URL = 'https://pixabay.com/api/';\naxios.defaults.baseURL = API_BASE_URL;\n\nconst form = document.querySelector('#form'),\n  searchInput = document.querySelector('#searchInput'),\n  gallery = document.querySelector('#gallery'),\n  loadImagesBtn = document.querySelector('#loadBtn'),\n  loader = document.querySelector('.loader');\n\nlet scrollOffset = innerHeight;\nlet page = 1;\nconst per_page = 40;\nlet userSearchRequest;\n\nwindow.scrollBy(0, scrollOffset);\n\nform.addEventListener('submit', handleFormSubmit);\nloadImagesBtn.addEventListener('click', loadMoreImages);\n\nasync function handleFormSubmit(e) {\n  e.preventDefault();\n  resetGallery();\n  userSearchRequest = searchInput.value;\n  await fetchAndRenderImages();\n}\n\nasync function fetchAndRenderImages() {\n  try {\n    const response = await axios.get(API_BASE_URL, {\n      params: getAPIParams(),\n    });\n    const images = response.data;\n    if (images.hits.length === 0) {\n      return showMessage(\n        'Sorry, no images match your search query. Please try again!'\n      );\n    }\n    renderImages(images.hits);\n    handleLoadMoreButton(images.totalHits);\n  } catch (error) {\n    handleAPIError();\n  } finally {\n    loader.classList.add('hide');\n  }\n}\n\nfunction renderImages(images) {\n  page += 1;\n\n  const markup = images.reduce(\n    (\n      html,\n      { webformatURL, largeImageURL, tags, likes, views, comments, downloads }\n    ) =>\n      html +\n      `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"image-desc\">\n          <div class=\"image-desc-item\">\n            <div class=\"image-desc-label\">Likes</div>\n            <div>${likes}</div>\n          </div>\n          <div class=\"image-desc-item\">\n             <div class=\"image-desc-label\">Views</div>\n             <div>${views}</div>\n          </div>\n          <div class=\"image-desc-item\">\n            <div class=\"image-desc-label\">Comments</div>\n            <div>${comments}</div>\n          </div>\n          <div class=\"image-desc-item\">\n            <div class=\"image-desc-label\">Downloads</div>\n            <div>${downloads}</div>\n          </div>\n        </div>\n      </li>\n      `,\n    ''\n  );\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  scrollOffset = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n\n  lightbox.refresh();\n}\n\nasync function loadMoreImages() {\n  loadImagesBtn.classList.add('hide');\n  loader.classList.remove('hide');\n  await fetchAndRenderImages();\n  // loadImagesBtn.classList.add('hide');\n}\n\nfunction resetGallery() {\n  loadImagesBtn.classList.add('hide');\n  loader.classList.remove('hide');\n  page = 1;\n  gallery.innerHTML = '';\n}\n\nfunction getAPIParams() {\n  return {\n    key: API_KEY,\n    q: userSearchRequest,\n    orientation: 'horizontal',\n    image_type: 'photo',\n    safesearch: true,\n    page,\n    per_page,\n  };\n}\n\nfunction handleLoadMoreButton(totalHits) {\n  const totalPages = Math.ceil(totalHits / per_page);\n  if (page > totalPages) {\n    showMessage(\"We're sorry, but you've reached the end of search results.\");\n  } else {\n    loadImagesBtn.classList.remove('hide');\n  }\n}\n\nfunction handleAPIError() {\n  showMessage('Oops... Something went wrong');\n}\n"],"names":["showMessage","message","iziToast","lightbox","SimpleLightbox","API_KEY","API_BASE_URL","axios","form","searchInput","gallery","loadImagesBtn","loader","scrollOffset","page","per_page","userSearchRequest","handleFormSubmit","loadMoreImages","e","resetGallery","fetchAndRenderImages","images","getAPIParams","renderImages","handleLoadMoreButton","handleAPIError","markup","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","totalHits","totalPages"],"mappings":"+vBAGe,SAASA,EAAYC,EAAS,CAC3CC,EAAS,KAAK,CACZ,MAAO,GACP,aAAc,GACd,QAAAD,EACA,aAAc,QACd,QAAS,IACT,aAAc,UACd,cAAe,WACf,SAAU,WACV,gBAAiB,MACjB,YAAa,EACjB,CAAG,CACH,CCbA,IAAIE,EAAW,IAAIC,EAAe,aAAc,CAC9C,eAAgB,GAChB,YAAa,EACf,CAAC,ECFD,MAAMC,EAAU,qCACVC,EAAe,2BACrBC,EAAM,SAAS,QAAUD,EAEzB,MAAME,EAAO,SAAS,cAAc,OAAO,EACzCC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAS,SAAS,cAAc,SAAS,EAE3C,IAAIC,EAAe,YACfC,EAAO,EACX,MAAMC,EAAW,GACjB,IAAIC,EAEJ,OAAO,SAAS,EAAGH,CAAY,EAE/BL,EAAK,iBAAiB,SAAUS,CAAgB,EAChDN,EAAc,iBAAiB,QAASO,CAAc,EAEtD,eAAeD,EAAiBE,EAAG,CACjCA,EAAE,eAAc,EAChBC,IACAJ,EAAoBP,EAAY,MAChC,MAAMY,EAAoB,CAC5B,CAEA,eAAeA,GAAuB,CACpC,GAAI,CAIF,MAAMC,GAHW,MAAMf,EAAM,IAAID,EAAc,CAC7C,OAAQiB,EAAc,CAC5B,CAAK,GACuB,KACxB,GAAID,EAAO,KAAK,SAAW,EACzB,OAAOtB,EACL,6DACR,EAEIwB,EAAaF,EAAO,IAAI,EACxBG,EAAqBH,EAAO,SAAS,CACtC,MAAe,CACdI,GACJ,QAAY,CACRd,EAAO,UAAU,IAAI,MAAM,CAC5B,CACH,CAEA,SAASY,EAAaF,EAAQ,CAC5BR,GAAQ,EAER,MAAMa,EAASL,EAAO,OACpB,CACEM,EACA,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAExEP,EACA;AAAA;AAAA,mBAEaE,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,mBAK7BC,CAAK;AAAA;AAAA;AAAA;AAAA,oBAIJC,CAAK;AAAA;AAAA;AAAA;AAAA,mBAINC,CAAQ;AAAA;AAAA;AAAA;AAAA,mBAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,QAKxB,EACJ,EAEEzB,EAAQ,mBAAmB,YAAaiB,CAAM,EAC9Cd,EAAe,SACZ,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAE3BV,EAAS,QAAO,CAClB,CAEA,eAAee,GAAiB,CAC9BP,EAAc,UAAU,IAAI,MAAM,EAClCC,EAAO,UAAU,OAAO,MAAM,EAC9B,MAAMS,EAAoB,CAE5B,CAEA,SAASD,GAAe,CACtBT,EAAc,UAAU,IAAI,MAAM,EAClCC,EAAO,UAAU,OAAO,MAAM,EAC9BE,EAAO,EACPJ,EAAQ,UAAY,EACtB,CAEA,SAASa,GAAe,CACtB,MAAO,CACL,IAAKlB,EACL,EAAGW,EACH,YAAa,aACb,WAAY,QACZ,WAAY,GACZ,KAAAF,EACA,SAAAC,CACJ,CACA,CAEA,SAASU,EAAqBW,EAAW,CACvC,MAAMC,EAAa,KAAK,KAAKD,EAAYrB,CAAQ,EAC7CD,EAAOuB,EACTrC,EAAY,4DAA4D,EAExEW,EAAc,UAAU,OAAO,MAAM,CAEzC,CAEA,SAASe,GAAiB,CACxB1B,EAAY,8BAA8B,CAC5C"}